[ ] Fix the cleanup(singletons), use smart pointers for everything

